<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Movie Catalog</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎬</text></svg>">
<script src="https://unpkg.com/@zxing/library@latest/umd/index.min.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <h1>🎬 Movie Catalog</h1>
      <p class="subtitle">Scan, catalog, and organize your DVD collection</p>
    </header>
    
   <nav class="tabs">
  <button class="tab active" onclick="showTab('add-movie', event)">➕ Add Movie</button>
  <button class="tab" onclick="showTab('scanner', event)">📱 Scanner</button>
  <button class="tab" onclick="showTab('collection', event)">📚 Collection</button>
  <button class="tab" onclick="showTab('import-export', event)">📁 Import/Export</button>
  <button class="tab" onclick="showTab('spreadsheet', event)">📊 Spreadsheet</button>
  </nav>

    <!-- Add Movie Tab -->
    <div id="add-movie" class="tab-content active">
      <h2>Add a New Movie</h2>
      <div class="status-message" id="add-status"></div>
      
      <form id="movieForm">
        <div class="field-group">
          <label for="title">Title:</label>
          <input type="text" id="title" required placeholder="Enter movie title">
        </div>
        
        <div class="field-group">
          <label>Format:</label>
          <div class="format-options">
            <div>
              <label><input type="checkbox" class="format1" value="DVD"> DVD</label>
              <label><input type="checkbox" class="format1" value="BluRay"> Blu-ray</label>
              <label><input type="checkbox" class="format1" value="4K"> 4K UHD</label>
              <label><input type="checkbox" class="format1" value="Streaming"> Streaming</label>
            </div>
            <div id="format2-container" style="display: none;">
              <label><input type="checkbox" class="format2" value="AppleTV"> Apple TV</label>
              <label><input type="checkbox" class="format2" value="MA"> Movies Anywhere</label>
              <label><input type="checkbox" class="format2" value="Fandango"> Fandango</label>
              <label><input type="checkbox" class="format2" value="Prime"> Prime Video</label>
            </div>
            <div id="format3-container" style="display: none;">
              <label><input type="checkbox" class="format3" value="HD"> HD</label>
              <label><input type="checkbox" class="format3" value="4K"> 4K</label>
            </div>
          </div>
        </div>
        
        <div class="field-group">
          <label for="genre">Genre:</label>
          <select id="genre">
            <option value="">Select Genre</option>
            <option value="Action">Action</option>
            <option value="Adventure">Adventure</option>
            <option value="Animation">Animation</option>
            <option value="Comedy">Comedy</option>
            <option value="Crime">Crime</option>
            <option value="Documentary">Documentary</option>
            <option value="Drama">Drama</option>
            <option value="Family">Family</option>
            <option value="Fantasy">Fantasy</option>
            <option value="Horror">Horror</option>
            <option value="Music">Music</option>
            <option value="Mystery">Mystery</option>
            <option value="Romance">Romance</option>
            <option value="Sci-Fi">Sci-Fi</option>
            <option value="Thriller">Thriller</option>
            <option value="War">War</option>
            <option value="Western">Western</option>
          </select>
        </div>
        
        <div class="field-group">
          <label for="director">Director:</label>
          <input type="text" id="director" placeholder="Director name">
        </div>
        <div class="field-group">
          <label for="producer">Producer:</label>
          <input type="text" id="producer" placeholder="Producer name">
        </div>
        <div class="field-group">
          <label for="studio">Studio:</label>
          <input type="text" id="studio" placeholder="Production studio">
        </div>
        <div class="field-group">
          <label for="year">Year:</label>
          <input type="number" id="year" min="1900" max="2030" placeholder="Release year">
        </div>
        <div class="field-group">
          <label for="runtime">Runtime:</label>
          <input type="text" id="runtime" placeholder="e.g., 120 min">
        </div>
        <div class="field-group">
          <label for="upc">UPC Code:</label>
          <input type="text" id="upc" placeholder="Barcode number">
        </div>
        <div class="field-group">
          <label for="asin">ASIN:</label>
          <input type="text" id="asin" placeholder="Amazon ASIN">
        </div>
        <div class="field-group">
          <label for="image">Cover Image:</label>
          <input type="file" id="image" accept="image/*">
          <small>Upload a movie cover image</small>
        </div>
        <div class="field-group">
          <label for="notes">Notes:</label>
          <textarea id="notes" placeholder="Personal notes, condition, special features, etc."></textarea>
        </div>
        <div class="field-group">
          <button type="submit" id="addMovieButton">
            <span class="button-text">➕ Add Movie</span>
            <span class="loading" id="add-loading" style="display: none;"></span>
          </button>
        </div>
      </form>
    </div>

    <!-- Scanner Tab -->
    <div id="scanner" class="tab-content">
      <h2>📱 Barcode Scanner</h2>
      <div class="status-message" id="scanner-status"></div>
      
      <div class="scanner-container">
        <div class="camera-container">
          <video id="scanner-video" autoplay playsinline></video>
          <div class="scanner-overlay">
            <div class="scanner-line"></div>
          </div>
        </div>
        <div class="scanner-controls">
          <button id="start-scanner">📷 Start Scanner</button>
          <button id="stop-scanner" disabled>⏹️ Stop Scanner</button>
        </div>
        <div id="scanner-result">
          <strong>✅ Scanned UPC:</strong> <span id="scanned-upc"></span>
          <div id="lookup-loading" style="display: none;">
            <div class="loading"></div> Looking up movie details...
          </div>
        </div>
      </div>
    </div>

    <!-- Collection Tab -->
    <div id="collection" class="tab-content">
      <h2>📚 Your Movie Collection</h2>
      <div class="collection-controls">
        <input type="text" id="search-input" placeholder="🔍 Search movies..." onkeyup="filterMovies()">
        <div class="collection-stats">
          <span id="movie-count">0 movies</span>
        </div>
      </div>
      <div id="movieList" class="movie-list">
        <div class="empty-state">
          <h3>📽️ Start Building Your Collection</h3>
          <p>Add movies manually or use the barcode scanner to get started!</p>
        </div>
      </div>
    </div>

    <!-- Import/Export Tab -->
    <div id="import-export" class="tab-content">
      <h2>📁 Import & Export</h2>
      
      <!-- Import Section -->
      <div class="import-section">
        <h3>📥 Import Your Collection</h3>
        <p>Import movies from CSV, JSON, or Excel files. Perfect for users with existing spreadsheets!</p>
        
        <div class="import-options">
          <button id="import-csv" class="btn btn-primary">📄 Import CSV</button>
          <button id="import-json" class="btn btn-primary">📄 Import JSON</button>
          <button onclick="window.importExportManager.importFromClipboard()" class="btn btn-secondary">📋 Paste from Clipboard</button>
        </div>
        
        <div class="import-tips">
          <h4>💡 Import Tips:</h4>
          <ul>
            <li>CSV files should have headers: Title, Year, Director, Genre, etc.</li>
            <li>Duplicate movies (by UPC) will be skipped automatically</li>
            <li>You can import multiple files to build your collection</li>
            <li>Supported formats: CSV, JSON, Excel (.xls, .xlsx)</li>
          </ul>
        </div>
      </div>

      <!-- Export Section -->
      <div class="export-section">
        <h3>📤 Export Your Collection</h3>
        <p>Export your collection to use in any spreadsheet application or backup your data.</p>
        
        <div class="export-options">
          <button id="export-csv" class="btn btn-success">📄 Export CSV</button>
          <button id="export-json" class="btn btn-success">📄 Export JSON</button>
          <button id="export-excel" class="btn btn-success">📊 Export Excel</button>
          <button onclick="window.importExportManager.exportToClipboard('csv')" class="btn btn-secondary">📋 Copy CSV to Clipboard</button>
        </div>
      </div>

      <!-- Backup Section -->
      <div class="backup-section">
        <h3>💾 Backup & Restore</h3>
        <p>Create local backups of your collection for safekeeping.</p>
        
        <div class="backup-options">
          <button id="create-backup" class="btn btn-info">💾 Create Backup</button>
          <button id="restore-backup" class="btn btn-warning">🔄 Restore Backup</button>
        </div>
      </div>

      <!-- Collection Stats -->
      <div class="collection-stats-section">
        <h3>📊 Collection Statistics</h3>
        <div id="collection-stats" class="stats-grid">
          <!-- Stats will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Spreadsheet Tab -->
    <div id="spreadsheet" class="tab-content">
      <h2>📊 Collection Spreadsheet</h2>
      <div class="spreadsheet-controls">
        <button onclick="refreshSpreadsheet()">🔄 Refresh</button>
        <button onclick="window.importExportManager.exportToCSV()">📥 Export CSV</button>
        <button onclick="window.importExportManager.exportToJSON()">📥 Export JSON</button>
        <button onclick="window.importExportManager.exportToExcel()">📊 Export Excel</button>
      </div>
      <div class="spreadsheet-container">
        <table class="spreadsheet" id="spreadsheet-table">
          <thead>
            <tr>
              <th>Cover</th>
              <th>Title</th>
              <th>Year</th>
              <th>Director</th>
              <th>Genre</th>
              <th>Runtime</th>
              <th>Formats</th>
              <th>UPC</th>
              <th>Added</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="spreadsheet-body">
            <tr>
              <td colspan="10" class="empty-state">
                <div>
                  <h3>📊 No Data Yet</h3>
                  <p>Add some movies to see them in the spreadsheet!</p>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Configuration Modal -->
<div id="config-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3>⚙️ Configuration</h3>
    <p>Movie catalog is ready to use!</p>
    <div class="modal-buttons">
      <button onclick="closeConfigModal()">✅ Continue</button>
    </div>
  </div>
</div>

  <script src="js/data-manager.js"></script>
  <script src="js/import-export.js"></script>
  <script src="js/app.js"></script>
  <script src="js/scanner.js"></script>
    <!-- Version Info -->
    <div style="position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 5px; font-size: 12px; z-index: 1000;">
        v1.2.0 - UPC Lookup Enabled
    </div>
</body>
</html>
